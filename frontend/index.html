<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Immobilier - Paris</title>
    
    <!-- MapLibre GL CSS -->
    <link href="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.css" rel="stylesheet" />
    
    <!-- Styles personnalis√©s -->
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- En-t√™te -->
    <header class="header">
        <h1>Dashboard Immobilier - Paris</h1>
        <p>Analyse par arrondissement</p>
    </header>

    <!-- Panneau de contr√¥le -->
    <aside class="control-panel">
        <h2>Filtres & M√©triques</h2>
        
        <!-- S√©lection de la m√©trique -->
        <div class="control-group">
            <label for="metric-select">M√©trique √† afficher</label>
            <select id="metric-select">
                <optgroup label="Prix & March√©">
                    <option value="prix_m2_median_2024">Prix/m¬≤ m√©dian 2024</option>
                    <option value="prix_median_2024">Prix m√©dian 2024</option>
                    <option value="evolution_prix_2020_2024_pct">√âvolution 2020-2024</option>
                    <option value="tendance_prix_m2">Tendance du march√©</option>
                </optgroup>
                <optgroup label="Logements">
                    <option value="nb_appartements_2024">Nombre d'appartements</option>
                    <option value="pct_T1_2024">Part de T1</option>
                    <option value="pct_T2_2024">Part de T2</option>
                    <option value="pct_T3_2024">Part de T3</option>
                    <option value="nb_logements_sociaux_apur">Logements sociaux (APUR)</option>
                    <option value="part_logements_sociaux_apur_pct">Logements sociaux (% APUR)</option>
                    <option value="estimation_logement_social_pct">Logements sociaux (estimation)</option>
                </optgroup>
                <optgroup label="Transport">
                    <option value="nb_stations_metro">Nombre de stations m√©tro</option>
                    <option value="trafic_total_metro">Trafic m√©tro total</option>
                    <option value="nb_lignes_metro">Nombre de lignes m√©tro</option>
                </optgroup>
                <optgroup label="Qualit√© de l'air">
                    <option value="no2_moyen">NO2 moyen</option>
                    <option value="pm10_moyen">PM10 moyen</option>
                    <option value="o3_moyen">O3 moyen</option>
                </optgroup>
            </select>
        </div>

        <!-- S√©lection de l'ann√©e -->
        <div class="control-group">
            <label for="year-select">Ann√©e</label>
            <select id="year-select">
                <option value="2024" selected>2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
            </select>
        </div>

        <!-- Bouton de rafra√Æchissement -->
        <button id="refresh-btn" class="btn-primary">
            Actualiser la carte
        </button>

        <!-- Statistiques -->
        <div id="stats-panel" class="stats-panel">
            <h3>Statistiques</h3>
            <div id="stats-content">
                <p>S√©lectionnez une m√©trique...</p>
            </div>
        </div>

        <!-- Mode Comparaison -->
        <div class="comparison-controls">
            <h3>üìä Mode Comparaison</h3>
            <div class="comparison-selects">
                <div class="comparison-select-group">
                    <label for="select-arr-a">Arrondissement A</label>
                    <select id="select-arr-a">
                        <option value="">S√©lectionner...</option>
                        <option value="1">1er</option>
                        <option value="2">2e</option>
                        <option value="3">3e</option>
                        <option value="4">4e</option>
                        <option value="5">5e</option>
                        <option value="6">6e</option>
                        <option value="7">7e</option>
                        <option value="8">8e</option>
                        <option value="9">9e</option>
                        <option value="10">10e</option>
                        <option value="11">11e</option>
                        <option value="12">12e</option>
                        <option value="13">13e</option>
                        <option value="14">14e</option>
                        <option value="15">15e</option>
                        <option value="16">16e</option>
                        <option value="17">17e</option>
                        <option value="18">18e</option>
                        <option value="19">19e</option>
                        <option value="20">20e</option>
                    </select>
                </div>
                <div class="comparison-select-group">
                    <label for="select-arr-b">Arrondissement B</label>
                    <select id="select-arr-b">
                        <option value="">S√©lectionner...</option>
                        <option value="1">1er</option>
                        <option value="2">2e</option>
                        <option value="3">3e</option>
                        <option value="4">4e</option>
                        <option value="5">5e</option>
                        <option value="6">6e</option>
                        <option value="7">7e</option>
                        <option value="8">8e</option>
                        <option value="9">9e</option>
                        <option value="10">10e</option>
                        <option value="11">11e</option>
                        <option value="12">12e</option>
                        <option value="13">13e</option>
                        <option value="14">14e</option>
                        <option value="15">15e</option>
                        <option value="16">16e</option>
                        <option value="17">17e</option>
                        <option value="18">18e</option>
                        <option value="19">19e</option>
                        <option value="20">20e</option>
                    </select>
                </div>
            </div>
            <button id="btn-comparer" class="btn-primary">
                Comparer
            </button>
        </div>
    </aside>

    <!-- Carte principale -->
    <main class="map-container">
        <div id="map"></div>
        
        <!-- L√©gende -->
        <div id="legend" class="legend">
            <h4 id="legend-title">Prix/m¬≤ m√©dian 2024</h4>
            <div id="legend-scale" class="legend-scale"></div>
        </div>
        
        <!-- Tooltip -->
        <div id="tooltip" class="tooltip"></div>
        
        <!-- Loading indicator -->
        <div id="loading" class="loading hidden">
            <div class="spinner"></div>
            <p>Chargement...</p>
        </div>
    </main>

    <!-- Panneau de d√©tails -->
    <aside id="detail-panel" class="detail-panel hidden">
        <button class="close-btn" onclick="closeDetailPanel()">√ó</button>
        <div id="detail-content"></div>
    </aside>

    <!-- Panneau de comparaison -->
    <div id="comparison-panel" class="comparison-panel hidden">
        <div id="comparison-content" style="position: relative;">
            <button id="btn-fermer-comparaison">√ó</button>
            <!-- Le contenu sera inject√© par JS -->
        </div>
    </div>

    <!-- MapLibre GL JS -->
    <script src="https://unpkg.com/maplibre-gl@4.7.1/dist/maplibre-gl.js"></script>
    
    <!-- Scripts de l'application -->
    <script src="assets/js/utils.js"></script>
    <script src="assets/js/api.js"></script>
    <script src="assets/js/map.js"></script>
    <script src="assets/js/ui.js"></script>
    <script src="assets/js/comparaison.js"></script>
    <script src="assets/js/main.js"></script>
</body>
</html>